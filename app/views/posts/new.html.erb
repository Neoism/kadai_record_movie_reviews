<h1>新規投稿</h1>
<%= form_with model: @post do |f| %>
  <div class="field">
    <%= f.label :title %><br />
    <%= f.text_field :title %>
  <div class="field">
    <%= f.label :watched_on %><br />
    <%= f.date_select :watched_on %>
  </div>
  <div class="field">
    <%= f.label :theater %><br />
    <%= f.text_field :theater %>
  </div>
  <div class="field">
    <%= f.label :comment %><br />
    <%= f.text_area :comment %>
  </div>
  <div class="field">
    <%= f.label :rate %><br />
    <%= f.hidden_field :rate %>
    <div id="star">
  </div>
  <%= f.submit '投稿する' %>
<% end %>

<script>
  $(document).on('turbolinks:load', function(){
    $('#star').raty({
      size: 36,
      starOff:  '<%= asset_path('star-off.png') %>',
      starOn:   '<%= asset_path('star-on.png') %>',
      starHalf: '<%= asset_path('star-half.png')%>',
      scoreName: 'post[rate]',
      half: true
    });
  })
</script>