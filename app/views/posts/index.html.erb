<h1>みんなの投稿</h1>

<table class="table table-striped">
  <thead>
    <tr>
      <th>タイトル</th>
      <th>観賞日</th>
      <th>映画館</th>
      <th>コメント</th>
      <th>評価</th>
    </tr>
  </thead>
  <tbody>
    <% @posts.each do |post| %>
      <tr>
        <td><%= link_to post.title, post_path(post) %></td>
        <td><%= post.watched_on %></td>
        <td><%= post.theater    %></td>
        <td><%= post.comment.truncate(13)    %></td>
        <td>
          <div id="star-rate-<%= post.id %>"></div>
          <script>
            $(document).on('turbolinks:load', function(){
              $('#star-rate-<%= post.id %>').raty({
                size: 36,
                starOff:  '<%= asset_path('star-off.png') %>',
                starOn :  '<%= asset_path('star-on.png') %>',
                starHalf: '<%= asset_path('star-half.png') %>',
                half: true,
                readOnly: true,
                score: <%= post.rate %>,
              });
            });
          </script> 
        </td>
      </tr>
    <% end %>
  </tbody>
</table>