<h1>Posts#index</h1>

<%= form_with url: search_posts_path, method: :get, local: true do |f| %>
  <%= f.text_field :keyword %>
  <%= f.submit :search %>
<% end %>

<table>
  <thead>
  </thead>
  <tbody>
    <% @posts.each do |post| %>
      <tr>
        <td><%= link_to post.title, post_path(post) %></td>
        <td><%= post.watched_on %></td>
        <td><%= post.theater    %></td>
        <td><%= post.comment    %></td>
        <td>
          <div id="star-rate-<%= post.id %>"></div>
          <script>
            $(document).on('turbolinks:load', function(){
              $('#star-rate-<%= post.id %>').raty({
                size: 36,
                starOff:  '<%= asset_path('star-off.png') %>',
                starOn :  '<%= asset_path('star-on.png') %>',
                starHalf: '<%= asset_path('star-half.png') %>',
                half: true,
                readOnly: true,
                score: <%= post.rate %>,
              });
            });
          </script> 
        </td>
      </tr>
    <% end %>
  </tbody>
</table>